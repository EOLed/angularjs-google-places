/*! angularjs-google-places 18-09-2013 */
"use strict";angular.module("gPlaces",[]),angular.module("gPlaces").provider("gPlacesAPI",function(){this.options={nearbySearchURL:"https://maps.googleapis.com/maps/api/place/nearbysearch",placeDetailsURL:"https://maps.googleapis.com/maps/api/place/details",key:null,radius:1e3,sensor:!1,location:{latitude:null,longitude:null},format:"json",types:"food"},this.buildParams=function(a,b){var c={};return angular.forEach(a,function(a){c[a]=b[a]}),c},this.parseNSJSON=function(a){var b=[],c=["name","reference","vicinity"];return a.results.map(function(a){var d={};angular.forEach(c,function(b){d[b]=a[b]}),b.push(d)}),b},this.parsePDJSON=function(a){var b={},c=["formatted_address","formatted_phone_number","reference","website"];return angular.forEach(c,function(c){b[c]=a.result[c]}),b},this.$get=function(a,b){var c=this.options,d=this.buildParams,e=this.parseNSJSON,f=this.parsePDJSON;return{getOptions:function(){return c},placeSearch:function(f){var g=angular.extend(c,f),h=g.nearbySearchURL+"/"+g.format,i={location:g.latitude+","+g.longitude},j=b.defer();return a.get(h,{params:angular.extend(d(["radius","types","names","sensor","key"],g),i)}).success(function(a){return j.resolve(e(a))}).error(function(){j.reject("error finding nearby places")}),j.promise},placeDetails:function(e){var g=angular.extend(c,e),h=g.placeDetailsURL+"/"+g.format,i=b.defer();return a.get(h,{params:d(["reference","sensor","key"],g)}).success(function(a){i.resolve(f(a))}).error(function(){i.reject("error grabbing place details")}),i.promise}}},this.setOptions=function(a){angular.extend(this.options,a)}});